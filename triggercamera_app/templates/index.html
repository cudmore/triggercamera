<!DOCTYPE HTML>
<html>
<head>
    <title>Trigger Camera</title>

	<style>
	div.page {
		width: 500px;
		padding: 15px;
		border: 0px solid gray;
		margin: 0; 
		//background-color: lightgray;
	}
	</style>

	<script type="text/javascript" src="static/jquery-2.2.1.min.js"></script>
	<script type="text/javascript" src="static/socket.io/1.3.5/socket.io.min.js"></script>

	<script type="text/javascript" src="static/bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>

	<link rel="stylesheet" href="static/bootstrap-3.3.6-dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="static/bootstrap-3.3.6-dist/css/bootstrap-theme.min.css">

	<link rel="stylesheet" href="static/Font-Awesome-master/css/font-awesome.min.css">

    <script type="text/javascript" charset="utf-8">
		$(document).ready(function(){

        function setStatus(msg)
        {
			//console.log("msg.date=" + msg.time);
			$('#datetimeID').html(msg.date + " " + msg.time);
			$('#isArmedID').html("Armed: " + msg.isArmed);
			$('#videoStartedID').html("Running: " + msg.videoStarted);

			$('#scanImageFrameID').html("Frame: " + msg.scanImageFrame);
			$('#logFilePathID').html("File: " + msg.logFilePath);

			$('#fpsID').html("fps: " + msg.fps);

			if (msg.videoStarted=='1') {
				trialspinner(1)
			} else {
				trialspinner(0)
			}
		};

		function trialspinner(start) {
			//if (trialIsRunning == 0) {
			if (start) {
				//console.log("startspinnerID")
				//$("body").css("cursor", "progress");
				$('#faSpinnerID').removeClass()
				$('#faSpinnerID').addClass('greencolor fa fa-circle-o-notch  fa-2x fa-spin')
				//setTimeout(function() { $('.fa').removeClass().addClass('fa fa-minus-circle') }, 1000);
			} else {
				//console.log("stopspinnerID")
				//$("body").css("cursor", "default");
				$('#faSpinnerID').removeClass()
				$('#faSpinnerID').addClass('blackcolor fa fa-circle-o-notch  fa-2x')
				//setTimeout(function() { $('.fa').removeClass().addClass('fa fa-minus-circle') }, 1000);
			}
		}

		$('#hideshowplotID').click(function(event) {        
			 jQuery('#plotID').toggle('show');
		});

		$('#hideshowoptionsID').click(function(event) {        
			 jQuery('#optionsID').toggle('show');
		});

		$('#plotID').hide() //plot is initially hidden
		$('#optionsID').hide() //options is initially hidden

		$('#plotlasttrialButtonID').click(function(event) {        
			filepath = '';
			socket.emit('plotTrialButtonID', {data: ''});
		});


		namespace = '';
        var socket = io.connect('http://' + document.domain + ':' + location.port + namespace);
        socket.on('connect', function() {
            socket.emit('my event', {data: 'Connected to server'});
        });

		socket.on('serverUpdate', function(msg) {
			//console.log(msg);
			setStatus(msg);				
		});

		socket.on('lastTrialDiv', function(msg) {
			console.log('lastTrialDiv received')
			$('#lastTrialPlotID').html(msg.plotDiv);				
		});

		}); //$(document).ready(function(){
    </script>

</head>
<body>
<div class="page">

	<div id="datetimeID" style="font-size:30px; float: right;">Not connected</div>
	<!--
	Trial
	<div id="isArmedID">Armed:</div>
	-->
	
	<i id="faSpinnerID" align="right" class="fa fa-circle-o-notch fa-2x"></i>		
	<!-- <div id="videoStartedID">Recording:</div> -->
	<div id="scanImageFrameID" style="font-size:20px;">Frame:</div>

	<div id="logFilePathID">File:</div>

Add a 'arm on' and 'arm off' button

	<BR>
	<BR>
	<button id="hideshowplotID" class=" btn btn-primary btn-xs"><span class="glyphicon glyphicon-chevron-down"></span></button>Plot
		<div id=plotID>
			<button id="plotlasttrialButtonID" class="btn btn-primary btn-sm">
			  Plot Last Trial
			</button>
			<div id="lastTrialPlotID"></div>
		</div>
		
	<BR>
	<BR>
	<button id="hideshowoptionsID" class=" btn btn-primary btn-xs"><span class="glyphicon glyphicon-chevron-down"></span></button>Options
	<!-- <div id="camerastate" style="width:200px; height:200px;"> -->
	<div id=optionsID>
		<h3>Camera</h3>
		<div id="optionsID">
			<div id="fpsID">fps:</div>
			<div id="imagesizeID">image size: 640, 480</div>
		<h3>Pi</h3>
			<div id="triggerPinID">Trigger Pin:</div>
			<div id="framePinID">Frame Pin</div>
	</div> <!-- options -->
	
	<!--
	<button id="armButtonID" class="btn btn-success btn-lg">
	  <span class="glyphicon glyphicon-play"></span> Arm
	</button>
	<button id="stopArmButtonID" class="btn btn-danger btn-lg">
	  <span class="glyphicon glyphicon-stop"></span> Stop Arm
	</button>
	-->
		
</div>
</body>
</html>